% Utils
\makeatletter
\newcommand{\ifnotempty}[2]{\@ifnotmtarg{#1}{#2}}
\newcommand{\ifempty}[3]{\@ifmtarg{#1}{#2}{3}}
\makeatother

% Environments
% \theoremstyle{definition}
% \newtheorem{example}{Example}[section]

% Code
\newcommand{\hs}{\mintinline{haskell}}
\newcommand{\idr}{\mintinline{idris}}
\newenvironment{bminted}[2][]
{\VerbatimEnvironment
  \RecustomVerbatimEnvironment{Verbatim}{BVerbatim}{}%
  \begin{center}
    \begin{minted}[autogobble,#1]{#2}}
  {\end{minted}\end{center}}

% Ambient metatheory
\newcommand\cat{\mathbb}
\newcommand\Set{\mathbf{Set}}
\newcommand{\mta}[1]{\textrm{#1}}

% Type theory

%% Names
\newcommand{\kwd}[1]{\textbf{#1}}
\newcommand{\defkwd}[1]{\textbf{#1}}
\newcommand{\lab}[1]{{\ensuremath{\color{OliveGreen}{\textsf{#1}}}}}
\newcommand{\ctorlab}[1]{{\ensuremath{\color{RawSienna}{\textsf{#1}}}}}
\newcommand{\fieldlab}[1]{{\ensuremath{\color{Plum}{\textsf{#1}}}}}
\newcommand{\datalab}[1]{{\ensuremath{\color{BlueViolet}{\textsf{#1}}}}}
\newcommand{\inte}[1]{\textsf{#1}}
\newcommand{\caselab}[1]{\fieldlab{$\text{case}_{\datalab{#1}}$}}

%% Terms
\newcommand{\letin}[3]{\kwd{let}\; {#1} = {#2}\; \kwd{in}\; {#3}}
\newcommand{\wildp}{\underline{\hspace{0.4em}}}
\newcommand{\univ}{\datalab{Type}}
\newcommand{\Id}[3]{{#2}=_{#1}{#3}}
\newcommand{\Repr}{\inte{Repr}}
\newcommand{\repr}[1]{\inte{repr}\ {#1}}
\newcommand{\unrepr}[1]{\inte{unrepr}\ {#1}}
\newcommand{\Crepr}[1]{\mathcal{R} {#1}}
\newcommand{\crepr}[1]{\mathcal{R} {#1}}
\newcommand{\DeltaFor}[1]{\Delta_{\lab{#1}}}

%% Definitions
\newcommand{\Sbody}[1]{\ \left\{\  \begin{aligned}#1\end{aligned} \ \right\}}
\newcommand{\Sdata}[3]{\defkwd{data} \ \datalab{#1} \ifnotempty{#2}{\, {#2}} \ifnotempty{#3}{: \, {#3} \to \univ}}
\newcommand{\Srecord}[2]{\defkwd{record} \ \datalab{#1} \ifnotempty{#2}{\, {#2}}}
\newcommand{\Sctor}[4]{\defkwd{ctor} \ \lab{#1} \, {#2} : \lab{#3}\, {#4}}
\newcommand{\Sctorvar}[4]{\defkwd{ctor} \ #1 \, {#2} : \lab{#3}\, {#4}}
\newcommand{\Sdef}[3]{\defkwd{def} \ \lab{#1} : {#2} = {#3}}
\newcommand{\Srepr}[3]{\defkwd{repr} \ \lab{#1}\, {#2}\ \defkwd{as}\ {#3}}
\newcommand{\Sreprconst}[2]{\defkwd{repr} \ \lab{#1}\ \defkwd{as}\ {#2}}
\newcommand{\Sreprvar}[3]{\defkwd{repr} \ {#1}\, {#2}\ \defkwd{as}\ {#3}}
\newcommand{\Sclosed}[2]{\defkwd{closed}\ #1 \ #2}

%% Judgements

\newcommand{\istype}[1]{{#1} \; \mta{type}}
\newcommand{\isConcrete}[1]{{#1}\ \mta{concrete}}
\newcommand{\isLabNotIn}[2]{\lab{#1}\ \mta{label} \notin {#2}}
\newcommand{\isSig}[1]{{#1}\ \mta{sig}}
\newcommand{\isCon}[1]{{#1}\ \mta{con}}
\newcommand{\isTel}[1]{{#1}\ \mta{tel}}

% CWF
\newcommand{\Ty}{\mta{Ty}}
\newcommand{\Tm}{\mta{Tm}}
\newcommand{\Con}{\mta{Con}}
\newcommand{\Sub}{\mta{Sub}}
\newcommand{\Tel}{\mta{Tel}}
\newcommand{\Sig}{\mta{Sig}}
\newcommand{\typeof}{\mta{typeof}}

% Languages
\newcommand{\lang}{\textsc}
\newcommand{\lambdaprim}{\lambda_{\lang{prim}}}
\newcommand{\lambdaind}{\lambda_{\lang{ind}}}
\newcommand{\lambdarep}{\lambda_{\lang{rep}}}

%%%%%%%% OLD

% \newcommand{\Trepr}[1]{\mta{repr}\, {#1}}
% \newcommand{\TRepr}[1]{\mta{Repr}\, {#1}}

% \newcommand{\infname}[1]{\textsc{#1}}
% \newcommand{\infrule}[3][]{{\infname{#1}}\,\frac{#2}{#3}}

% \newcommand{\datawhere}[2][]{\inte{data}\ \defin{#2}{#1}\ \inte{where}}
% \newcommand{\recordwhere}[2][]{\inte{record}\ \defin{#2}{#1}\ \inte{where}}

% \newcommand{\data}{\inte{data}}
% \newcommand{\ctor}{\inte{record}}

% \newcommand{\caseof}[1]{\inte{case}\; {#1}\; \inte{of}}
% \newcommand{\branch}[2]{{#1} \mapsto {#2}}
% \newcommand{\isrepr}[2]{{#1} \ \mta{repr}\;{#2}}
% \newcommand{\isind}[1]{{#1} \ \mta{ind}}
% \newcommand{\lbl}{\textsf}

% \newcommand{\mM}{\mta{Meta}}
% \newcommand{\mR}{\mta{Repr}}
% \newcommand{\mV}{\mta{Val}}
% \newcommand{\mO}{\mta{Obj}}
% \newcommand{\mI}{\mta{Ind}}
% \newcommand{\mS}{\mta{Syn}}

% \newcommand{\Um}{{\univ{\mM}}}
% \newcommand{\Ur}{{\univ{\mR}}}
% \newcommand{\Uo}{{\univ{\mO}}}
% \newcommand{\Ui}{{\univ{\mI}}}

% \newcommand{\catG}{{\cat{G}}}
% \newcommand{\catL}{{\cat{L}}}
% \newcommand{\Gm}{{\G_{\mM}}}
% \newcommand{\Gr}{{\G_{\mR}}}
% \newcommand{\Gv}{{\G_{\mV}}}
% \newcommand{\Gi}{{\G_{\mI}}}

% \def\fun{\mathrm}
% \def\funArrow{\longrightarrow}
% \def\Ob{\mathrm{Ob}}
% \def\Hom{\mathrm{Hom}}
% \def\Cat{\mathbf{Cat}}
% \def\usr{\mathrm}
% \def\implies{\Longrightarrow}
% \def\Repr{\mathrm{Repr}}

% Theorems
% \newtheorem{theorem}{Theorem}[section]
% \newtheorem{corollary}{Corollary}[theorem]
% \newtheorem{lemma}[theorem]{Lemma}
% \theoremstyle{definition}
% \newtheorem{definition}{Definition}[section]

% \AtBeginDocument{\colorlet{defaultcolor}{.}}

% \newcommand\val[1]{\text{#1}}
% \newcommand\funct[1]{\rv{\text{#1}}}
% \newcommand\catt[1]{\mathbb{#1}}
% \newcommand\repr[2]{\cat{Repr}_{\catt{#2}}^{\catt{#1}}}

% \newcommand{\hv}{\textcolor{Violet}}
% \newcommand{\lv}{\textcolor{RedViolet}}
% \newcommand{\iv}{\textcolor{PineGreen}}
% \newcommand{\rv}{\textcolor{defaultcolor}}

% \newcommand{\cattH}{{\hv{\catt{H}}}}
% \newcommand{\cattL}{{\lv{\catt{L}}}}
% \newcommand{\cattI}{{\iv{\catt{I}}}}
% \newcommand{\repalg}{{\hv{\textbf{rep-alg}}}}
% \newcommand{\repcoalg}{{\hv{\textbf{rep-coalg}}}}
% \newcommand{\spec}[1]{{\lv{\textbf{spec}_{\hv{#1}}}}}
% \newcommand{\isspec}{{{\textbf{is-\lv{spec}}}}}
% \newcommand{\Rep}[1]{{\lv{\textbf{Rep}_{\hv{#1}}}}}
% \newcommand{\Int}[1]{{\hv{\textbf{Int}_{\hv{#1}}}}}
% \newcommand{\native}[1]{{{\textsf{\textbf{#1}}}}}

% \newcommand{\lam}{\lambda}
% \newcommand{\ap}{{\textbf{\textsf{ap}}}}
% % \newcommand{\case}{{\textbf{\textsf{case}}}}
% \newcommand{\inl}{{\textsf{inl}}}
% \newcommand{\inr}{{\textsf{inr}}}
% \newcommand{\inn}{{\textbf{\textsf{in}}}}
% \newcommand{\Q}{{\hv{\textbf{\textsf{Q}}}}}
% \newcommand{\C}{\lv{\textbf{\textsf{C}}}}

% \newcommand{\Nat}{\hv{\mathbb{N}}}
% \newcommand{\z}{{\hv{\textsf{z}}}}
% \newcommand{\s}{{\hv{\textsf{s}}}}
% \newcommand{\NatF}{{\hv{\mathbb{N}\text{F}}}}
% \newcommand{\Word}{\lv{\mathcal{W}}}
% \newcommand{\ifthen}[3]{\textbf{\lv{\textsf{if}}} \; #1 \; \lv{\textbf{\textsf{then}}} \; #2 \; \lv{\textbf{\textsf{else}}} \; #3}
% \newcommand{\sif}{\textbf{\lv{\textsf{if}}}}
% \newcommand{\sthen}{\textbf{\lv{\textsf{then}}}}
% \newcommand{\selse}{\textbf{\lv{\textsf{else}}}}

% \newcommand{\Srepr}[4]{\kwd{repr} \ \lab{#1} \ \kwd{for}\ \lab{#2}\, {#3}\ \kwd{as}\ {#4}}
% \newcommand{\Sreprconst}[3]{\kwd{repr} \ \lab{#1} \ \kwd{for}\ \lab{#2}\ \kwd{as}\ {#3}}
% \newcommand{\Sreprvar}[4]{\kwd{repr} \ \lab{#1} \ \kwd{for}\ {#2}\, {#3}\ \kwd{as}\ {#4}}
